{% extends 'tasks/base.html' %}
{% load static %}

{% block title %}家事分析{% endblock %}

{% block content %}
<div class="container">
    <h4 class="page-title"><strong>家事分析</strong></h4>
    <button class="toggle-btn" data-target="completed">完了</button>
    <button class="toggle-btn" data-target="incompleted">未完了</button>

    <!-- 完了タスクグラフ -->
    <div data-container="completed">
        <h3>直近1週間 - 完了タスク</h3>
        <canvas id="completedChart" width="400" height="400"></canvas>
    </div>

    <!-- 未完了タスクグラフ -->
    <div data-container="incompleted" style="display:none;">
        <h3>直近1週間 - 未完了タスク</h3>
        <canvas id="incompletedChart" width="400" height="400"></canvas>
    </div>
</div>
<script>
    // Djangoから渡されたデータをスクリプトで直接埋め込む
    const completedLabels = {{ completed_labels|safe }};
    const completedData = {{ completed_data|safe }};
    const incompleteLabels = {{ incomplete_labels|safe }};
    const incompleteData = {{ incomplete_data|safe }};
</script>
{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/task_analysis.css' %}">
{% endblock %}

{% block javascript %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{% static 'js/task_analysis.js' %}"></script>
{% endblock %}